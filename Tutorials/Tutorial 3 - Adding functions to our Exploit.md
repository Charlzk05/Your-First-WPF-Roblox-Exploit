# Tutorial #3 - Adding functions to your Exploit

### Requirements for this tutorial:
- C# and XAML Experience

### 1. Download [WeAreDevsAPI](https://wearedevs.net/d/Exploit%20API) and your [Monaco Editor](https://drive.google.com/file/d/1ZBDGK6kqRVzoi6pmdmNG03oxFnOj1NfU/view)

### 2. Extract WeAreDevsAPI.dll and Monaco folder to your Debug folder
![image](https://user-images.githubusercontent.com/104715127/209787789-0e00ea11-8965-4a95-abc7-753bea6b22a3.png)

### 3. Add WeAreDevs_API.dll to your project References
![image](https://user-images.githubusercontent.com/104715127/209787881-68380238-8f6a-4f3e-846d-d50df8a59183.png)
![image](https://user-images.githubusercontent.com/104715127/209787959-b40e48da-ced7-4a5c-abe7-c5abc2ab297b.png)
![image](https://user-images.githubusercontent.com/104715127/209788086-f13240b6-ac68-45a1-b5c5-72a79b3b7a4e.png)

### 4. Use WeAreDevsAPI into your code (Go to MainWindow.xaml.cs)
```csharp
using WeAreDevs_API;

namespace Your_First_WPF_Roblox_Exploit
{
  public partial class MainWindow : Window
  {
    ExploitAPI wrdAPI = new ExploitAPI();
    
    public MainWindow()
    {
      InitializeComponent();
    }
  }
}
```

### 5. Load Monaco and Scripts ListBox
- Create a new folder named "Scripts" in your Debug folder
```xaml
<WebBrowser x:Name="editor" ...
<ListBox x:Name="scriptsListBox" ...
```
```csharp
public MainWindow()
{
  editor.Navigate(new Uri(string.Format("file:///{0}/Monaco/index.html", Directory.GetCurrentDirectory())));
  
  foreach (FileInfo i in new DirectoryInfo("./Scripts").GetFiles("*.txt"))
      scriptsListBox.Items.Add(i.Name);
  foreach (FileInfo i in new DirectoryInfo("./Scripts").GetFiles("*.lua"))
      scriptsListBox.Items.Add(i.Name);
}
```

### 6. ListBox Function
```xaml
<ListBox x:Name="scriptsListBox" SelectionChanged="scriptsListBox_SelectionChanged" ...
```
```csharp
private void scriptsListBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    string script = File.ReadAllText("./Scripts/" + scriptsListBox.SelectedItem);
    editor.InvokeScript("setValue", script);
}
```

### 7. Inject, Execute, Clear, Open File, Save File Buttons
- Inject Button
```xaml
<Button x:Name="injectButton" Click="injectButton_Click" ...
```
```csharp
private void injectButton_Click(object sender, RoutedEventArgs e)
{
    if (wrdAPI.isAPIAttached() == false)
        wrdAPI.LaunchExploit();
    else
        MessageBox.Show("WeAreDevs is already attached", "Warning", MessageBoxButton.OK, MessageBoxImage.Warning);
}
```
- Execute Button
```xaml
<Button x:Name="executeButton" Click="executeButton_Click" ...
```
```csharp
private void executeButton_Click(object sender, RoutedEventArgs e)
{
    if (wrdAPI.isAPIAttached() == true)
    {
        string script = editor.InvokeScript("getValue").ToString();
        wrdAPI.SendLuaScript(script);
    }
    else
        MessageBox.Show("WeAreDevs is not attached", "Error", MessageBoxButton.OK, MessageBoxImage.Error);
}
```
- Clear Button
```xaml
<Button x:Name="clearButton" Click="clearButton_Click" ...
```
```csharp
private void clearButton_Click(object sender, RoutedEventArgs e)
{
    editor.InvokeScript("setValue", "");
}
```
- Open File Button
```xaml
<Button x:Name="openFileButton" Click="openFileButton_Click" ...
```
```csharp
private void openFileButton_Click(object sender, RoutedEventArgs e)
{
    OpenFileDialog dialog = new OpenFileDialog();
    dialog.Filter = "Txt Files (*.txt)|*.txt|Lua Files (*.lua)|*.lua|All Files (*.*)|*.*";
    
    if (dialog.ShowDialog() == true)
    {
        string script = File.ReadAllText(dialog.FileName);
        editor.InvokeScript("setValue", script);
    }
}
```
- Save File
```xaml
<Button x:Name="saveFileButton" Click="saveFileButton_Click" ...
```
```csharp
private void saveFileButton_Click(object sender, RoutedEventArgs e)
{
    SaveFileDialog dialog = new SaveFileDialog();
    dialog.Filter = "Txt Files (*.txt)|*.txt|Lua Files (*.lua)|*.lua|All Files (*.*)|*.*";
    
    if (dialog.ShowDialog() == true)
    {
        string content = editor.InvokeScript("getValue").ToString();
        File.WriteAllText(dialog.FileName, content);
    }
}
```
### 7. Making your window draggable
```xaml
MouseDown="Window_MouseDown" ...
```
```csharp
private void Window_MouseDown(object sender, MouseButtonEventArgs e)
{
    if (e.ChangedButton == MouseButton.Left)
        this.DragMove();
}
```
### 8. Exit and Minimize Button functions
- Exit Button
```xaml
<Button x:Name="exitButton" Click="exitButton_Click" ...
```
```csharp
private void exitButton_Click(object sender, RoutedEventArgs e)
{
    Application.Current.Shutdown();
}
```
- Minimize Button
```xaml
<Button x:Name="minimizeButton" Click="minimizeButton_Click" ...
```
```csharp
private void minimizeButton_Click(object sender, RoutedEventArgs e)
{
    WindowState = WindowState.Minimized;
}
```
### 9. Building
![image](https://user-images.githubusercontent.com/104715127/209791337-2a284700-1179-442e-9d75-ebb685a6cf27.png)
![image](https://user-images.githubusercontent.com/104715127/209791405-1ecec4d3-8f3a-47f1-8d04-91d2cff0222e.png)
![image](https://user-images.githubusercontent.com/104715127/209791427-ad117efe-ff95-4a46-abc6-451f94a71e64.png)

### Enjoy! :D
